<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spatial Pooling Widgets</title>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://rhyolight.github.io/cell-viz/bin/cell-viz-1.2.0.min.js"></script>
    <script src="../../dist/widgets/bhtms-spatial-pooling-widgets-0.1.0.js"></script>

    <style>
        body {
            width: 560px;
            border: solid 1px black;
        }
        .bar rect {
            fill: steelblue;
        }

        .bar text {
            fill: #fff;
            font: 10px sans-serif;
        }

    </style>

</head>
<body>

<div>

    <h1>Receptive Field Demo</h1>

    <svg id="receptiveFieldDemo"></svg>

    <ul>
        <li>
            <input type="range" min="100" max="600" value="400" id="inputSpaceDimensionsSlider" />
            input space: <span class="inputSpaceDimensionsDisplay"></span> cells
        </li>
        <li>
            <input type="range" min="0" max="100" value="50" id="receptiveFieldPercSlider" />
            receptive field: <span class="receptiveFieldPercDisplay"></span>%
        </li>
    </ul>


    <script>
        $(function() {
            BHTMS.receptiveField()
        });
    </script>

</div>

<div>

    <svg id="receptiveFieldHistogram" width="560" height="200"></svg>

    <ul>
        <!--<li>-->
            <!--<input type="range" min="0" max="100" value="85" id="connectionThresholdSlider" />-->
            <!--connection threshold: <span class="connectionThresholdDisplay"></span>-->
        <!--</li>-->
        <li>
            <input type="range" min="1" max="100" value="10" id="independentVariablesSlider" />
            Bates distribution independent variables: <span class="independentVariablesDisplay"></span>
        </li>
    </ul>

    <script>
        $(function() {
            BHTMS.receptiveFieldHistogram()
        });
    </script>

</div>

<!--<section>-->

    <!--<h1>Mini-Column Receptive Field Demo</h1>-->

    <!--<table><tbody><tr>-->
        <!--<td>-->
            <!--<svg id="miniColumnOverhead"></svg>-->
        <!--</td>-->
        <!--<td>-->
            <!--<svg id="inputSpaceOverhead"></svg>-->
        <!--</td>-->
    <!--</tr></tbody></table>-->

    <!--<ul>-->
        <!--<li>-->
            <!--<input type="range" min="0" max="2048" value="128" id="miniColumnCountSlider" />-->
            <!--mini-column count: <span class="miniColumnCountDisplay"></span>-->
        <!--</li>-->
    <!--</ul>-->


    <!--<script>-->
        <!--$(function() {-->
            <!--// let SdrUtils = require('SdrUtils')-->
            <!--// let SdrDrawing = require('SdrDrawing')-->

            <!--// module.exports = () => {-->


            <!--/** WIDGET CODE STARTS HERE **/-->

            <!--let miniColumnDrawing, inputSpace-->
            <!--let potentialPools-->

            <!--let $miniColumnCountSlider = $('#miniColumnCountSlider')-->
            <!--let $miniColumnCountDisplay = $('.miniColumnCountDisplay')-->

            <!--let $inputSpaceDimensionsSlider = $('#inputSpaceDimensionsSlider')-->
            <!--let $receptiveFieldPercSlider = $('#receptiveFieldPercSlider')-->

            <!--let miniColumnCount = parseInt($miniColumnCountSlider.val())-->
            <!--let inputSpaceCount = parseInt($inputSpaceDimensionsSlider.val())-->
            <!--let receptiveFieldPerc = parseInt($receptiveFieldPercSlider.val())-->

            <!--function getRandomReceptiveField(receptiveFieldPerc, dimensions) {-->
                <!--let n = dimensions-->
                <!--let w = parseInt(receptiveFieldPerc * n)-->
                <!--let potentialPool = SdrUtils.getRandom(n, w)-->
                <!--return potentialPool-->
            <!--}-->

            <!--function updatePotentialPools() {-->
                <!--potentialPools = []-->
                <!--for (let i = 0; i < miniColumnCount; i++) {-->
                    <!--let pools = []-->
                    <!--for (let j = 0; j < inputSpaceCount; j++) {-->
                        <!--let pool = getRandomReceptiveField(receptiveFieldPerc / 100, inputSpaceCount)-->
                        <!--pools.push(pool)-->
                    <!--}-->
                    <!--potentialPools.push(pools)-->
                <!--}-->

            <!--}-->

            <!--let miniColumnDrawOptions = {-->
                <!--width: 300,-->
                <!--height: 300,-->
                <!--cellSize: 20,-->
                <!--rowLength: 28,-->
            <!--}-->
            <!--let inputSpaceDrawOptions = Object.assign(miniColumnDrawOptions, {-->
                <!--cellSize: 10,-->
                <!--rowLength: 30,-->
            <!--});-->

            <!--function updateDisplays() {-->
                <!--// miniColumnDrawing.draw(miniColumnDrawOptions)-->
                <!--$miniColumnCountDisplay.html($miniColumnCountSlider.val())-->
            <!--}-->

            <!--$miniColumnCountSlider.on('input', function () {-->
                <!--miniColumnCount = parseInt(this.value)-->
                <!--// updatePotentialPools()-->
                <!--// miniColumnDrawing = new SdrDrawing(potentialPools, 'miniColumnOverhead')-->
                <!--updateDisplays()-->
            <!--});-->

            <!--// updatePotentialPools()-->
            <!--// miniColumnDrawing = new SdrDrawing(potentialPools, 'miniColumnOverhead')-->
            <!--updateDisplays()-->



            <!--/** WIDGET CODE ENDS HERE **/-->

            <!--// }-->
        <!--});-->
    <!--</script>-->

</section>

</body>
</html>
